package com.hack23.cia.service.impl.rules.committee

import org.kie.api.runtime.KieRuntime

import com.hack23.cia.model.internal.application.data.committee.impl.ViewRiksdagenCommittee
import com.hack23.cia.model.internal.application.data.rules.impl.Status
import com.hack23.cia.service.impl.rules.CommitteeComplianceCheckImpl

rule "Committee with no leadership positions"
	dialect "java"
	salience 10
    when
        // Leadership positions are critical for committee function
        $p : CommitteeComplianceCheckImpl(committee.active && committee.currentMemberSize > 0 && committee.currentLeadershipPositions == 0)
    then
    	$p.addViolation( Status.MINOR, "CommitteeLeadershipVacancy","Structure", kcontext.getRule().getName(),"NoLeadership");
end

rule "Committee with leadership but few members"
	dialect "java"
	salience 50
    when
        // Threshold: Fewer than 5 members with leadership indicates understaffing
        $p : CommitteeComplianceCheckImpl(committee.active && committee.currentLeadershipPositions > 0 && committee.currentMemberSize < 5)
    then
    	$p.addViolation( Status.MAJOR, "CommitteeLeadershipVacancy","Structure", kcontext.getRule().getName(),"Understaffed");
end

rule "Committee with no regular members"
	dialect "java"
	salience 100
    when
        $p : CommitteeComplianceCheckImpl(committee.active && committee.currentRegularMembers == 0)
    then
    	$p.addViolation( Status.CRITICAL, "CommitteeLeadershipVacancy","Structure", kcontext.getRule().getName(),"NoRegularMembers");
end
