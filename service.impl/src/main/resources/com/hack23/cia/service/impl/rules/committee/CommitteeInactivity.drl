package com.hack23.cia.service.impl.rules.committee

import org.kie.api.runtime.KieRuntime

import com.hack23.cia.model.internal.application.data.committee.impl.ViewRiksdagenCommittee
import com.hack23.cia.model.internal.application.data.rules.impl.Status
import com.hack23.cia.service.impl.rules.CommitteeComplianceCheckImpl

rule "Committee with few committee motions"
	dialect "java"
	salience 10
    when
        // Threshold: < 100 cumulative committee motions indicates low historical legislative initiative
        // Analysis shows P25 = 81 total motions, adjusted to 100 for clarity
        $p : CommitteeComplianceCheckImpl(committee.active && committee.totalCommitteeMotions < 100 && committee.totalCommitteeMotions > 10)
    then
    	$p.addViolation( Status.MINOR, "CommitteeInactivity","Behavior", kcontext.getRule().getName(),"FewCommitteeMotions");
end

rule "Committee with very few committee motions"
	dialect "java"
	salience 50
    when
        // Threshold: < 10 cumulative motions indicates severe lack of legislative initiative
        $p : CommitteeComplianceCheckImpl(committee.active && committee.totalCommitteeMotions < 10 && committee.totalCommitteeMotions > 0)
    then
    	$p.addViolation( Status.MAJOR, "CommitteeInactivity","Behavior", kcontext.getRule().getName(),"VeryFewCommitteeMotions");
end

rule "Committee with no committee motions"
	dialect "java"
	salience 100
    when
        // Complete absence of committee motions indicates fundamental inactivity
        $p : CommitteeComplianceCheckImpl(committee.active && committee.totalCommitteeMotions == 0)
    then
    	$p.addViolation( Status.CRITICAL, "CommitteeInactivity","Behavior", kcontext.getRule().getName(),"NoCommitteeMotions");
end
