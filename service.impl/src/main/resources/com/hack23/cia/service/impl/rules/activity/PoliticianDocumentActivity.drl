package com.hack23.cia.service.impl.rules.activity

import org.kie.api.runtime.KieRuntime

import com.hack23.cia.model.internal.application.data.politician.impl.ViewRiksdagenPoliticianDocumentDailySummary
import com.hack23.cia.model.internal.application.data.rules.impl.Status
import com.hack23.cia.service.impl.rules.PoliticianComplianceCheckImpl

rule "Politician with high daily document output"
    dialect "java"
    when
        $p : PoliticianComplianceCheckImpl(
            politician.active,
            eval( $p.getDailyDocumentOutput() > 10 )
        )
    then
        $p.addViolation(
            Status.MAJOR,
            "PoliticianDocumentActivity",
            "DocumentOutput",
            kcontext.getRule().getName(),
            "High Daily Document Output"
        );
end

rule "Politician with high annual document output"
    when
        $p : PoliticianComplianceCheckImpl(
              annualSummary != null,
              // Suppose annualSummary has an attribute: annualDocCount
              eval( $p.getAnnualSummary().getAnnualDocCount() > 100 )
        )
    then
        $p.addViolation(
            Status.MINOR,
            "DocumentActivity",
            "HighAnnualOutput",
            kcontext.getRule().getName(),
            "Politician created >100 documents this year"
        );
end

rule "Rule #6: Politician with high annual document output"
    when
        $p : PoliticianComplianceCheckImpl(
              annualSummary != null,
              // Suppose annualSummary has an attribute: annualDocCount
              eval( $p.getAnnualSummary().getAnnualDocCount() > 100 )
        )
    then
        $p.addViolation(
            Status.MINOR,
            "DocumentActivity",
            "HighAnnualOutput",
            kcontext.getRule().getName(),
            "Politician created >100 documents this year"
        );
end
