# Citizen Intelligence Agency

Tracking politicians like bugs. Citizen Intelligence Agency is independent and non-partisan voluntary project.

Using Statistical Machine Intelligence and Learning Engine and Business Rules Management System to track politicians.


[![license](https://img.shields.io/github/license/Hack23/cia.svg)](https://raw.githubusercontent.com/Hack23/cia/master/citizen-intelligence-agency/LICENSE.txt)
[![FOSSA Status](https://app.fossa.io/api/projects/git%2Bgithub.com%2FHack23%2Fcia.svg?type=shield)](https://app.fossa.io/projects/git%2Bgithub.com%2FHack23%2Fcia?ref=badge_shield)
[![CLA assistant](https://cla-assistant.io/readme/badge/Hack23/cia)](https://cla-assistant.io/Hack23/cia)
[![Maven Central](https://img.shields.io/maven-central/v/com.hack23.cia/cia-dist-deb.svg)](http://mvnrepository.com/artifact/com.hack23.cia/cia-dist-deb)
[![CII Best Practices](https://bestpractices.coreinfrastructure.org/projects/770/badge)](https://bestpractices.coreinfrastructure.org/projects/770)
[![OpenSSF Scorecard](https://api.securityscorecards.dev/projects/github.com/Hack23/cia/badge)](https://api.securityscorecards.dev/projects/github.com/Hack23/cia)
[![Jenkins](https://img.shields.io/jenkins/s/https/www.hack23.com/jenkins/job/Hack23/job/cia/job/master.svg)](https://www.hack23.com/jenkins/job/Hack23/job/cia/job/master/)
[![Jenkins tests](https://img.shields.io/jenkins/t/https/www.hack23.com/jenkins/job/Hack23/job/cia/job/master.svg)](https://www.hack23.com/jenkins/job/Hack23/job/cia/job/master/lastCompletedBuild/testReport/)
[![Build Status](https://travis-ci.org/Hack23/cia.svg?branch=master)](https://travis-ci.org/Hack23/cia)
[![Coverage](https://www.hack23.com/sonar/api/project_badges/measure?project=com.hack23.cia%3Acia-all&metric=coverage)](https://www.hack23.com/sonar/dashboard?id=com.hack23.cia%3Acia-all)
[![Lines of Code](https://www.hack23.com/sonar/api/project_badges/measure?project=com.hack23.cia%3Acia-all&metric=ncloc)](https://www.hack23.com/sonar/dashboard?id=com.hack23.cia%3Acia-all)
[![Technical Debt](https://www.hack23.com/sonar/api/project_badges/measure?project=com.hack23.cia%3Acia-all&metric=sqale_index)](https://www.hack23.com/sonar/dashboard?id=com.hack23.cia%3Acia-all)
[![CodeFactor](https://www.codefactor.io/repository/github/hack23/cia/badge)](https://www.codefactor.io/repository/github/hack23/cia)
[![Maintainability](https://api.codeclimate.com/v1/badges/14cc2db98322e8338ef1/maintainability)](https://codeclimate.com/github/Hack23/cia/maintainability)
[![codebeat badge](https://codebeat.co/badges/5a7cf18f-68cb-4535-b197-8b541bf9bb7c)](https://codebeat.co/projects/github-com-hack23-cia-master)
[![DepShield Badge](https://depshield.sonatype.org/badges/Hack23/cia/depshield.svg)](https://depshield.github.io)
[![Average time to resolve an issue](http://isitmaintained.com/badge/resolution/Hack23/cia.svg)](http://isitmaintained.com/project/Hack23/cia "Average time to resolve an issue")
[![Percentage of issues still open](http://isitmaintained.com/badge/open/Hack23/cia.svg)](http://isitmaintained.com/project/Hack23/cia "Percentage of issues still open")
[![Quality Gate](https://www.hack23.com/sonar/api/project_badges/measure?project=com.hack23.cia%3Acia-all&metric=alert_status)](https://www.hack23.com/sonar/dashboard?id=com.hack23.cia%3Acia-all)


# Runtime

[![JDK-17 or higher](https://img.shields.io/badge/jdk-17-green.svg)]
[![JDK-18](https://img.shields.io/badge/jdk-18-orange.svg)]
[![JDK-19](https://img.shields.io/badge/jdk-19-green.svg)]
[![JDK-20](https://img.shields.io/badge/jdk-20-orange.svg)]


# Goal

Visualize political activity in Sweden, present key performance indicators and metadata for the actors on national level.


# Demo https://www.hack23.com/cia/

Still prototype, live demo running at [https:/www.hack23.com/cia/](https:/www.hack23.com/cia/) and [https://riksdagsmonitor.com/](https://riksdagsmonitor.com/)

Using open data from  [http://data.riksdagen.se/](http://data.riksdagen.se/) , [http://www.val.se/](http://www.val.se/) and [http://data.worldbank.org/](http://data.worldbank.org/) .

Currently the application displays data, metadata and charts for data related to Swedish parliament and government. Covering parliament members, committees, documents, ballots, decisions, ministries, government members and political parties.

Limited functionality proper navigation, descriptions,content, ui and styling are still not in place.



# Roadmap

Plan to make it public some time after 2022.04, running Ubuntu 22.04, Postgresql 14.x, JDK17+, Spring framework 6.x , Hibernate 6.x, Vaadin 8.x


#Resources

Project documentation [http://hack23.github.io/cia/](http://hack23.github.io/cia//)

Project Architecture [http://hack23.github.io/cia/architecture.html](http://hack23.github.io/cia/architecture.html)

Project Architecture(old) [https://structurizr.com/share/37264#Enterprise](https://structurizr.com/share/37264#Enterprise)

3D project view [https://www.hack23.com/sonar/project/extension/softvis3d/overview_page?id=com.hack23.cia:cia-all&qualifier=TRK&metricFootprint=complexity&metricHeight=ncloc&metricColor=coverage&layout=district&scale=logarithmic&cameraX=0&cameraY=1551&cameraZ=1570&colorTheme=default](https://www.hack23.com/sonar/project/extension/softvis3d/overview_page?id=com.hack23.cia:cia-all&qualifier=TRK&metricFootprint=complexity&metricHeight=ncloc&metricColor=coverage&layout=district&scale=logarithmic&cameraX=0&cameraY=1551&cameraZ=1570&colorTheme=default)

Github source code location [https://github.com/Hack23/cia](https://github.com/Hack23/cia)

Build server, jenkins [https://www.hack23.com/jenkins/](https://www.hack23.com/jenkins/)

QA report, sonarqube [https://www.hack23.com/sonar/](https://www.hack23.com/sonar/)

Repository manager, nexus [https://www.hack23.com/nexus/](https://www.hack23.com/nexus/)


# Reporting Security Issues

[Follow instructions](https://github.com/Hack23/cia/blob/master/SECURITY.md)

# Parlimentary informatics

[https://en.wikipedia.org/wiki/Parliamentary_informatics](https://en.wikipedia.org/wiki/Parliamentary_informatics) list many good examples of other projects in the domain around the world.

USA
[https://www.govtrack.us/](https://www.govtrack.us/)

Canada
[http://OpenParliament.ca](http://OpenParliament.ca)

European Union
[http://www.votewatch.eu/](http://www.votewatch.eu/)

Sweden
[http://govdata.se/api](http://govdata.se/api)

[http://riksdagsskolket.se/](http://riksdagsskolket.se/)

[http://www.demokratikollen.se](http://www.demokratikollen.se)


Denmark
[http://www.hvemstemmerhvad.dk/](http://www.hvemstemmerhvad.dk/)

Finland
[http://kansanmuisti.fi/](http://kansanmuisti.fi/)

Norway
[https://www.holderdeord.no/](https://www.holderdeord.no/)

UK
[https://www.theyworkforyou.com/](https://www.theyworkforyou.com/)

[http://www.publicwhip.org.uk/](http://www.publicwhip.org.uk/)

Germany
[http://offenesparlament.de](http://offenesparlament.de)

Italy
[http://parlamento17.openpolis.it/](http://parlamento17.openpolis.it/)

France
[https://www.nosdeputes.fr/](https://www.nosdeputes.fr/)

[https://www.projetarcadie.fr](https://projetarcadie.com)

Colombia
[http://www.congresovisible.org/](http://www.congresovisible.org/)

Jordanian
[http://www.jpm.jo/](http://www.jpm.jo/)

South Korea
[http://pokr.kr/](http://pokr.kr/)

Israel
[https://oknesset.org/](https://oknesset.org/)


# Running docker image

 Docker repository : https://hub.docker.com/r/hack23/cia/

1. docker run hack23/cia:2022.12.26 -p 28443:8443

2. Access server at https://localhost:28443/cia/ , register new user to get admin access

# Installing Debian/Ubuntu package

 Currently only build a debian package, works with debian and ubuntu 20.4+


1. Installing database(postgres) and openjdk

```
$ sudo apt-get install openjdk-16-jdk postgresql-13 pgadmin3
```


2. Installing Postgresql on Ubuntu

```
$ sudo apt-get install postgresql-13 postgresql-contrib postgresql-13-pgaudit
```

3. Create empty database

Below description set the default username/password and database name used for development, recommend using custom credentials and update the configuration at /opt/cia/webapps/cia/WEB-INF/database.properties to define your own username/password and database name.

```
$ sudo su - postgres
$ psql
postgres=# CREATE USER eris WITH password 'discord';
postgres=# CREATE DATABASE cia_dev;
postgres=# GRANT ALL PRIVILEGES ON DATABASE cia_dev to eris;
```

4. Modify postgres setting, enable prepared transactions and extensions used pg_stat_statements, pgaudit, pgcrypto

Edit file "/etc/postgresql/13/main/postgresql.conf" set

```
max_prepared_transactions = 100
```

```
shared_preload_libraries = 'pg_stat_statements, pgaudit, pgcrypto'
pgaudit.log = ddl
pg_stat_statements.track = all
pg_stat_statements.max = 10000
```

5. Modify postgres setting
Edit file "/etc/postgresql/13/main/pg_hba.conf" add line

```
host all all ::1/128 md5
```


6. Restart postgres

```
$ service postgresql restart
```

7. Get cia debian package and


```
$ wget https://oss.sonatype.org/content/repositories/releases/com/hack23/cia/cia-dist-deb/2022.12.26/cia-dist-deb-2022.12.26.deb
```


8. Install debian package

```
$ sudo dpkg -i cia-dist-deb-2022.12.26.deb
```


9. Access the server at [https://localhost:28443/cia/](https://localhost:28443/cia/) .


# Application package diagram overview

![Package overview diagram](https://hack23.github.io/cia/apidocs/package-dependencies.svg)
[Api docs](https://hack23.github.io/cia/apidocs/index.html)


# Cloudformation template diagram

[![Cloudformation](https://www.hack23.com/jenkins/job/Hack23/job/cia/job/master/lastSuccessfulBuild/artifact/cia-dist-cloudformation/target/cloudformation-doc/cia-dist-cloudformation.png)](https://www.hack23.com/jenkins/job/Hack23/job/cia/job/master/lastSuccessfulBuild/artifact/cia-dist-cloudformation/target/cloudformation-doc/cia-dist-cloudformation.png)
