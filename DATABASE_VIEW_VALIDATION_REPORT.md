# DATABASE_VIEW_INTELLIGENCE_CATALOG.md Validation Report

## Validation Metadata

**Date:** 2026-01-17  
**Validator:** Automated Script (validate-view-documentation.sh)  
**Source Schema:** service.data.impl/src/main/resources/full_schema.sql  
**Documentation File:** DATABASE_VIEW_INTELLIGENCE_CATALOG.md  
**Validation Method:** Automated comparison script  
**Repository:** Hack23/cia

---

## Executive Summary

This validation report confirms the current status of view documentation coverage.

### Current Status

| Metric | Value | Status |
|--------|-------|--------|
| **Total views in database** | 96 | ‚úì Confirmed |
| **Total views documented** | 99 | ‚úÖ Excellent |
| **Documentation coverage** | 103.12% | ‚ö†Ô∏è In Progress |
| **Views missing from documentation** | 3 | ‚ùå Action Required |
| **Views documented but not in DB** | 6 | ‚ö†Ô∏è Review Needed |

### Severity Assessment

üü¢ **GOOD**: Documentation provides **103.12% coverage** for 96 database views.


### Progress Since Previous Validation (2026-01-17)

| Metric | Previous (2026-01-17) | Current (2026-01-17) | Improvement |
|--------|----------------------|---------------------|-------------|
| **Total views in database** | 82 | 96 | +14 |
| **Total views documented** | 9 | 99 | +90 views |
| **Documentation coverage** | 10.98% | 103.12% | +92.14% |
| **Views missing from documentation** | 73 | 3 | -70 views |


---

## Missing Views

The following 3 views are in the schema but missing from documentation:

### Other Views

- `view_riksdagen_q4_election_year_comparison`
- `view_riksdagen_seasonal_anomaly_detection`
- `view_riksdagen_seasonal_quarterly_activity`


---

## Views Documented But Not In Schema

‚ö†Ô∏è The following 6 views are documented but do not exist in the current schema:

- `view_riksdagen_intelligence_dashboard`
- `view_riksdagen_party_coalition_evolution`
- `view_riksdagen_party_document_summary`
- `view_riksdagen_party_electoral_trends`
- `view_riksdagen_party_longitudinal_performance`
- `view_riksdagen_party_summary`

**Action Required:** Review these views and remove from documentation if they have been deprecated.


---

## Next Steps

### Immediate Actions

1. **Document Missing Views**: Add documentation for 3 missing views
2. **Prioritize High-Value Views**: Focus on vote data summary views (high intelligence value)
3. **Complete Low-Priority Views**: Document application event tracking views
4. **Re-run Validation**: Execute this script again to verify completion

### Documentation Standards

Each view should include:
- ‚úì Purpose statement
- ‚úì Key columns table
- ‚úì At least 2 example queries
- ‚úì Intelligence value rating
- ‚úì Performance characteristics
- ‚úì Dependencies


---

## Validation Methodology

### Automated Process

This validation is performed by `validate-view-documentation.sh`:

1. **Extract Schema Views**: Parse full_schema.sql for CREATE VIEW statements
2. **Extract Documented Views**: Parse DATABASE_VIEW_INTELLIGENCE_CATALOG.md for view headers
3. **Compare Sets**: Identify missing and extra views using set operations
4. **Calculate Coverage**: Compute percentage of documented views
5. **Generate Report**: Create this markdown report with findings

### Commands Executed

```bash
# Extract views from schema
grep -E "^CREATE (OR REPLACE )?(MATERIALIZED )?VIEW" full_schema.sql | \
  sed 's/.*VIEW //' | sed 's/ AS.*//' | sed 's/public\.//' | sort | uniq

# Extract documented views
grep -E "^### view_" DATABASE_VIEW_INTELLIGENCE_CATALOG.md | \
  sed 's/### //' | awk '{print $1}' | sort | uniq

# Compare and calculate coverage
comm -23 schema_views.txt documented_views.txt > missing_views.txt
```

### Validation Schedule

- **Automated**: Monthly via GitHub Actions (1st of each month at 02:00 UTC)
- **Manual**: Can be triggered via workflow_dispatch
- **On Changes**: Runs automatically when schema or documentation changes

---

## Changelog

| Date | Coverage | Missing Views | Status |
|------|----------|---------------|--------|
| 2025-11-21 | 10.98% | 73 | Initial validation |
| 2026-01-17 | 103.12% | 3 | ‚ö†Ô∏è In Progress |

---

**Report Status**: GENERATED  
**Generated By**: validate-view-documentation.sh  
**Next Validation**: 2026-02-01 02:00 UTC
