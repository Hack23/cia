Timing is on.
==================================================
CIA Database Schema Health Check
Started: Thu Nov 27 05:19:37 PM CET 2025
Database: cia_dev
==================================================
psql:schema-health-check.sql:29: NOTICE:  table "health_check_results" does not exist, skipping
DROP TABLE
Time: 10.281 ms
CREATE TABLE
Time: 6.748 ms

==========================================
=== SCHEMA INTEGRITY CHECKS          ===
==========================================

Checking foreign key integrity...
DO
Time: 275374.114 ms (04:35.374)
Checking view integrity...
DO
Time: 20693.143 ms (00:20.693)
Checking materialized view freshness...
INSERT 0 28
Time: 4.657 ms

==========================================
=== DATA QUALITY CHECKS              ===
==========================================

Checking for empty critical tables...
DO
Time: 332.618 ms
Checking for NULLs in critical columns...
DO
Time: 0.442 ms
Checking for duplicates...
DO
Time: 15.372 ms
Checking NULL percentage in critical columns...
DO
Time: 215.032 ms
Checking data distribution...
DO
Time: 3.121 ms

==========================================
=== PERFORMANCE ANALYSIS             ===
==========================================

Checking for missing indexes on foreign keys...
INSERT 0 68
Time: 4.955 ms
Checking table maintenance...
INSERT 0 10
Time: 4.712 ms
Checking for slow query patterns...
DO
Time: 32.055 ms
Checking for table bloat...
INSERT 0 6
Time: 1.546 ms
Checking connection pool usage...
INSERT 0 1
Time: 3.502 ms
Checking query cache hit ratio...
INSERT 0 1
Time: 1.803 ms
Checking for database lock waits...
INSERT 0 1
Time: 0.596 ms

==========================================
=== SECURITY VALIDATION              ===
==========================================

Checking user permissions...
INSERT 0 2
Time: 1.126 ms
Checking SSL configuration...
DO
Time: 1.022 ms
Checking pgaudit extension...
INSERT 0 1
Time: 0.251 ms
Checking password encryption...
DO
Time: 0.927 ms

==========================================
=== REFERENTIAL INTEGRITY CHECKS     ===
==========================================

Checking cascade delete rules...
INSERT 0 12
Time: 11.323 ms
Checking constraint validation status...
INSERT 0 0
Time: 0.463 ms

==========================================
=== VIEW DEPENDENCY ANALYSIS         ===
==========================================

Checking view dependency depth...
DO
Time: 10.003 ms
Checking for empty views...
DO
Time: 15793.226 ms (00:15.793)

==========================================
=== HEALTH SCORE CALCULATION         ===
==========================================
 blank1 |                     separator                      |              title              |                     separator2                     | blank2 |       total       | pass_count  |  warn_count   |  fail_count  |   critical_count    | blank3 |                score                | blank4 |                  status_assessment                   |                     separator3                     | blank5 
--------+----------------------------------------------------+---------------------------------+----------------------------------------------------+--------+-------------------+-------------+---------------+--------------+---------------------+--------+-------------------------------------+--------+------------------------------------------------------+----------------------------------------------------+--------
        | ================================================== |            HEALTH CHECK SUMMARY | ================================================== |        | Total Checks: 303 | Passed: 186 | Warnings: 104 | Failures: 13 | Critical Issues: 13 |        | **OVERALL HEALTH SCORE: 78.55/100** |        | ⚠ Status: GOOD - Monitor warnings, plan improvements | ================================================== | 
(1 row)

Time: 0.813 ms

--- CATEGORY HEALTH SCORES ---
     category      | health_score |    status    | checks |  passed  | warnings | failures 
-------------------+--------------+--------------+--------+----------+----------+----------
 Performance       | 53.09/100    | CRITICAL ✗✗✗ |     97 | 7 pass   | 89 warn  | 1 fail
 View Dependencies | 55.00/100    | CRITICAL ✗✗✗ |     10 | 1 pass   | 9 warn   | 0 fail
 Security          | 87.50/100    | GOOD ⚠       |      4 | 3 pass   | 1 warn   | 0 fail
 Schema Integrity  | 92.13/100    | EXCELLENT ✓  |    178 | 162 pass | 4 warn   | 12 fail
 Data Quality      | 96.43/100    | EXCELLENT ✓  |     14 | 13 pass  | 1 warn   | 0 fail
(5 rows)

Time: 0.520 ms

--- CATEGORY BREAKDOWN ---
     category      | total_checks | passed_count | warning_count | failure_count | pass_rate 
-------------------+--------------+--------------+---------------+---------------+-----------
 View Dependencies |           10 | 1 passed     | 9 warnings    | 0 failures    | 10.0%
 Performance       |           97 | 7 passed     | 89 warnings   | 1 failures    | 7.2%
 Security          |            4 | 3 passed     | 1 warnings    | 0 failures    | 75.0%
 Schema Integrity  |          178 | 162 passed   | 4 warnings    | 12 failures   | 91.0%
 Data Quality      |           14 | 13 passed    | 1 warnings    | 0 failures    | 92.9%
(5 rows)

Time: 0.364 ms

--- ISSUES REQUIRING ATTENTION ---
     category      |                                    check_name                                     | status | severity_level |                           details                           |                                                                  recommendation                                                                   
-------------------+-----------------------------------------------------------------------------------+--------+----------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------
 Schema Integrity  | Foreign Key: qrtz_cron_triggers.sched_name                                        | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_triggers
 Schema Integrity  | Foreign Key: qrtz_cron_triggers.sched_name                                        | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_triggers
 Schema Integrity  | Foreign Key: qrtz_cron_triggers.trigger_group                                     | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_triggers
 Schema Integrity  | Foreign Key: qrtz_cron_triggers.trigger_group                                     | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_triggers
 Schema Integrity  | Foreign Key: qrtz_cron_triggers.trigger_name                                      | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_triggers
 Schema Integrity  | Foreign Key: qrtz_cron_triggers.trigger_name                                      | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_triggers
 Schema Integrity  | Foreign Key: qrtz_triggers.job_group                                              | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_job_details
 Schema Integrity  | Foreign Key: qrtz_triggers.job_group                                              | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_job_details
 Schema Integrity  | Foreign Key: qrtz_triggers.job_name                                               | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_job_details
 Schema Integrity  | Foreign Key: qrtz_triggers.job_name                                               | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_job_details
 Schema Integrity  | Foreign Key: qrtz_triggers.sched_name                                             | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_job_details
 Schema Integrity  | Foreign Key: qrtz_triggers.sched_name                                             | FAIL   | CRITICAL       | Found 4 orphaned records                                    | Clean up orphaned records or add missing parent records in qrtz_job_details
 Performance       | Query Cache Hit Ratio                                                             | FAIL   | ERROR          | Hit Ratio: 65.90%                                           | Increase shared_buffers or optimize queries to reduce disk I/O
 Data Quality      | Critical Table: sweden_political_party                                            | WARN   | WARNING        | Table has only 40 rows                                      | Verify data completeness and import status
 Performance       | Missing Index: against_proposal_data.against_proposal_list_agains_0               | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_against_proposal_data_against_proposal_list_agains_0 ON against_proposal_data(against_proposal_list_agains_0);
 Performance       | Missing Index: application_action_event.events_application_session_h_0            | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_application_action_event_events_application_session_h_0 ON application_action_event(events_application_session_h_0);
 Performance       | Missing Index: application_view.data_source_information_appl_0                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_application_view_data_source_information_appl_0 ON application_view(data_source_information_appl_0);
 Performance       | Missing Index: application_view.operational_information_appl_0                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_application_view_operational_information_appl_0 ON application_view(operational_information_appl_0);
 Performance       | Missing Index: application_view.performance_indicators_appli_0                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_application_view_performance_indicators_appli_0 ON application_view(performance_indicators_appli_0);
 Performance       | Missing Index: application_view.quality_assurance_applicatio_0                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_application_view_quality_assurance_applicatio_0 ON application_view(quality_assurance_applicatio_0);
 Performance       | Missing Index: application_view.target_profile_application_v_0                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_application_view_target_profile_application_v_0 ON application_view(target_profile_application_v_0);
 Performance       | Missing Index: assignment_data.assignment_list_person_assig_0                     | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_assignment_data_assignment_list_person_assig_0 ON assignment_data(assignment_list_person_assig_0);
 Performance       | Missing Index: assignment_element.uppdrag_person_assignment_el_0                  | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_assignment_element_uppdrag_person_assignment_el_0 ON assignment_element(uppdrag_person_assignment_el_0);
 Performance       | Missing Index: committee_proposal_component_0.against_proposal_container_c_0      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_committee_proposal_component_0_against_proposal_container_c_0 ON committee_proposal_component_0(against_proposal_container_c_0);
 Performance       | Missing Index: committee_proposal_component_0.committee_proposal_container_0      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_committee_proposal_component_0_committee_proposal_container_0 ON committee_proposal_component_0(committee_proposal_container_0);
 Performance       | Missing Index: committee_proposal_component_0.document_committee_proposal__0      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_committee_proposal_component_0_document_committee_proposal__0 ON committee_proposal_component_0(document_committee_proposal__0);
 Performance       | Missing Index: committee_proposal_data.committee_proposal_list_comm_0             | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_committee_proposal_data_committee_proposal_list_comm_0 ON committee_proposal_data(committee_proposal_list_comm_0);
 Performance       | Missing Index: country_element.country_countries_element_hj_0                     | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_country_element_country_countries_element_hj_0 ON country_element(country_countries_element_hj_0);
 Performance       | Missing Index: detail_data.detail_list_person_detail_da_0                         | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_detail_data_detail_list_person_detail_da_0 ON detail_data(detail_list_person_detail_da_0);
 Performance       | Missing Index: document_activity_data.document_activities_document_0              | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_activity_data_document_activities_document_0 ON document_activity_data(document_activities_document_0);
 Performance       | Missing Index: document_attachment.document_attachment_list_doc_0                 | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_attachment_document_attachment_list_doc_0 ON document_attachment(document_attachment_list_doc_0);
 Performance       | Missing Index: document_detail_data.document_detail_list_documen_0                | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_detail_data_document_detail_list_documen_0 ON document_detail_data(document_detail_list_documen_0);
 Performance       | Missing Index: document_element.dokument_document_container__0                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_element_dokument_document_container__0 ON document_element(dokument_document_container__0);
 Performance       | Missing Index: document_person_reference_da_0.document_person_reference_li_1      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_person_reference_da_0_document_person_reference_li_1 ON document_person_reference_da_0(document_person_reference_li_1);
 Performance       | Missing Index: document_proposal_container.proposal_document_proposal_c_0         | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_proposal_container_proposal_document_proposal_c_0 ON document_proposal_container(proposal_document_proposal_c_0);
 Performance       | Missing Index: document_reference_data.document_reference_list_docu_0             | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_reference_data_document_reference_list_docu_0 ON document_reference_data(document_reference_list_docu_0);
 Performance       | Missing Index: document_status_container.document_activity_container__0           | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_status_container_document_activity_container__0 ON document_status_container(document_activity_container__0);
 Performance       | Missing Index: document_status_container.document_attachment_containe_0           | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_status_container_document_attachment_containe_0 ON document_status_container(document_attachment_containe_0);
 Performance       | Missing Index: document_status_container.document_detail_container_do_0           | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_status_container_document_detail_container_do_0 ON document_status_container(document_detail_container_do_0);
 Performance       | Missing Index: document_status_container.document_document_status_con_0           | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_status_container_document_document_status_con_0 ON document_status_container(document_document_status_con_0);
 Performance       | Missing Index: document_status_container.document_person_reference_co_1           | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_status_container_document_person_reference_co_1 ON document_status_container(document_person_reference_co_1);
 Performance       | Missing Index: document_status_container.document_proposal_document_s_0           | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_status_container_document_proposal_document_s_0 ON document_status_container(document_proposal_document_s_0);
 Performance       | Missing Index: document_status_container.document_reference_container_0           | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_document_status_container_document_reference_container_0 ON document_status_container(document_reference_container_0);
 Performance       | Missing Index: domain_portal.hjid                                                 | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_domain_portal_hjid ON domain_portal(hjid);
 Performance       | Missing Index: indicator_element.indicator__indicators_elemen_0                   | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_indicator_element_indicator__indicators_elemen_0 ON indicator_element(indicator__indicators_elemen_0);
 Performance       | Missing Index: indicator_element.topics_indicator_element_hjid                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_indicator_element_topics_indicator_element_hjid ON indicator_element(topics_indicator_element_hjid);
 Performance       | Missing Index: person_container_data.person_person_container_data_0               | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_person_container_data_person_person_container_data_0 ON person_container_data(person_person_container_data_0);
 Performance       | Missing Index: person_data.person_assignment_data_perso_0                         | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_person_data_person_assignment_data_perso_0 ON person_data(person_assignment_data_perso_0);
 Performance       | Missing Index: person_data.person_detail_data_person_da_0                         | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_person_data_person_detail_data_person_da_0 ON person_data(person_detail_data_person_da_0);
 Performance       | Missing Index: person_detail_element.detail_list_person_detail_el_0               | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_person_detail_element_detail_list_person_detail_el_0 ON person_detail_element(detail_list_person_detail_el_0);
 Performance       | Missing Index: person_element.person_assignment_element_pe_0                      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_person_element_person_assignment_element_pe_0 ON person_element(person_assignment_element_pe_0);
 Performance       | Missing Index: person_element.person_detail_element_person_0                      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_person_element_person_detail_element_person_0 ON person_element(person_detail_element_person_0);
 Performance       | Missing Index: person_element.person_person_container_elem_0                      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_person_element_person_person_container_elem_0 ON person_element(person_person_container_elem_0);
 Performance       | Missing Index: portal.portals_agency_hjid                                         | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_portal_portals_agency_hjid ON portal(portals_agency_hjid);
 Performance       | Missing Index: qrtz_cron_triggers.sched_name                                      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_cron_triggers_sched_name ON qrtz_cron_triggers(sched_name);
 Performance       | Missing Index: qrtz_cron_triggers.trigger_group                                   | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_cron_triggers_trigger_group ON qrtz_cron_triggers(trigger_group);
 Performance       | Missing Index: qrtz_cron_triggers.trigger_name                                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_cron_triggers_trigger_name ON qrtz_cron_triggers(trigger_name);
 Performance       | Missing Index: qrtz_simple_triggers.sched_name                                    | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_simple_triggers_sched_name ON qrtz_simple_triggers(sched_name);
 Performance       | Missing Index: qrtz_simple_triggers.trigger_group                                 | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_simple_triggers_trigger_group ON qrtz_simple_triggers(trigger_group);
 Performance       | Missing Index: qrtz_simple_triggers.trigger_name                                  | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_simple_triggers_trigger_name ON qrtz_simple_triggers(trigger_name);
 Performance       | Missing Index: qrtz_simprop_triggers.sched_name                                   | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_simprop_triggers_sched_name ON qrtz_simprop_triggers(sched_name);
 Performance       | Missing Index: qrtz_simprop_triggers.trigger_group                                | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_simprop_triggers_trigger_group ON qrtz_simprop_triggers(trigger_group);
 Performance       | Missing Index: qrtz_simprop_triggers.trigger_name                                 | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_simprop_triggers_trigger_name ON qrtz_simprop_triggers(trigger_name);
 Performance       | Missing Index: qrtz_triggers.job_group                                            | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_triggers_job_group ON qrtz_triggers(job_group);
 Performance       | Missing Index: qrtz_triggers.job_name                                             | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_qrtz_triggers_job_name ON qrtz_triggers(job_name);
 Performance       | Missing Index: sweden_county_data.county_regions_sweden_county_0                  | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_county_data_county_regions_sweden_county_0 ON sweden_county_data(county_regions_sweden_county_0);
 Performance       | Missing Index: sweden_county_electoral_area.landstingsvalkrets_sweden_co_0        | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_county_electoral_area_landstingsvalkrets_sweden_co_0 ON sweden_county_electoral_area(landstingsvalkrets_sweden_co_0);
 Performance       | Missing Index: sweden_county_electoral_regi_1.county_electoral_regions_swe_0      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_county_electoral_regi_1_county_electoral_regions_swe_0 ON sweden_county_electoral_regi_1(county_electoral_regions_swe_0);
 Performance       | Missing Index: sweden_election_type.election_types_sweden_electi_0                | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_election_type_election_types_sweden_electi_0 ON sweden_election_type(election_types_sweden_electi_0);
 Performance       | Missing Index: sweden_election_type.region_sweden_election_type__0                | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_election_type_region_sweden_election_type__0 ON sweden_election_type(region_sweden_election_type__0);
 Performance       | Missing Index: sweden_municipality_data.kommun_sweden_county_data_hj_0            | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_municipality_data_kommun_sweden_county_data_hj_0 ON sweden_municipality_data(kommun_sweden_county_data_hj_0);
 Performance       | Missing Index: sweden_municipality_election_0.kommunvalkrets_sweden_munici_0      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_municipality_election_0_kommunvalkrets_sweden_munici_0 ON sweden_municipality_election_0(kommunvalkrets_sweden_munici_0);
 Performance       | Missing Index: sweden_parliament_electoral__1.parliament_electoral_regions_0      | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_parliament_electoral__1_parliament_electoral_regions_0 ON sweden_parliament_electoral__1(parliament_electoral_regions_0);
 Performance       | Missing Index: sweden_political_party.parties_sweden_election_regi_0              | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_sweden_political_party_parties_sweden_election_regi_0 ON sweden_political_party(parties_sweden_election_regi_0);
 Performance       | Missing Index: topic.topic_topics_hjid                                            | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_topic_topic_topics_hjid ON topic(topic_topics_hjid);
 Performance       | Missing Index: user_account_address.hjid                                          | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_user_account_address_hjid ON user_account_address(hjid);
 Performance       | Missing Index: world_bank_data.data__data_element_hjid                            | WARN   | WARNING        | No index found on foreign key column                        | CREATE INDEX idx_world_bank_data_data__data_element_hjid ON world_bank_data(data__data_element_hjid);
 Performance       | Slow Query: DO $$                                                                +| WARN   | WARNING        | Avg time: 63404.74ms | Calls: 1                             | Optimize query or add indexes
                   | DECLARE                                                                          +|        |                |                                                             | 
                   |     -- *** MAINTENANCE NOTE ***                                                  +|        |                |                                                             | 
                   |     ...                                                                           |        |                |                                                             | 
 Performance       | Slow Query: DO $$                                                                +| WARN   | WARNING        | Avg time: 275372.81ms | Calls: 1                            | Optimize query or add indexes
                   | DECLARE                                                                          +|        |                |                                                             | 
                   |     fk_record RECORD;                                                            +|        |                |                                                             | 
                   |     orphan_cou...                                                                 |        |                |                                                             | 
 Performance       | Slow Query: DO $$                                                                +| WARN   | WARNING        | Avg time: 189709.65ms | Calls: 1                            | Optimize query or add indexes
                   | DECLARE                                                                          +|        |                |                                                             | 
                   |     v_views TEXT[] := ARRAY[                                                     +|        |                |                                                             | 
                   |        ...                                                                        |        |                |                                                             | 
 Performance       | Slow Query: REFRESH MATERIALIZED VIEW view_riksdagen_committee...                 | WARN   | WARNING        | Avg time: 34097.26ms | Calls: 1                             | Optimize query or add indexes
 Performance       | Slow Query: REFRESH MATERIALIZED VIEW view_riksdagen_vote_data...                 | WARN   | WARNING        | Avg time: 109393.78ms | Calls: 1                            | Optimize query or add indexes
 Performance       | Slow Query: REFRESH MATERIALIZED VIEW view_riksdagen_vote_data...                 | WARN   | WARNING        | Avg time: 22950.77ms | Calls: 1                             | Optimize query or add indexes
 Performance       | Slow Query: SELECT COUNT(*) FROM public.jv_commit_property chi...                 | WARN   | WARNING        | Avg time: 35047.82ms | Calls: 1                             | Optimize query or add indexes
 Performance       | Slow Query: SELECT COUNT(*) FROM public.jv_global_id child LEF...                 | WARN   | WARNING        | Avg time: 55127.44ms | Calls: 1                             | Optimize query or add indexes
 Performance       | Slow Query: SELECT COUNT(*) FROM public.jv_snapshot child LEFT...                 | WARN   | WARNING        | Avg time: 142876.06ms | Calls: 1                            | Optimize query or add indexes
 Performance       | Slow Query: SELECT COUNT(*) FROM public.jv_snapshot child LEFT...                 | WARN   | WARNING        | Avg time: 39229.69ms | Calls: 1                             | Optimize query or add indexes
 Performance       | Table Bloat: public.against_proposal_data                                         | WARN   | WARNING        | Live tuples: 1 | Dead tuples: 1 | Dead ratio: 100.00%       | VACUUM FULL public.against_proposal_data; -- WARNING: Locks table
 Performance       | Table Bloat: public.application_action_event                                      | WARN   | WARNING        | Live tuples: 11 | Dead tuples: 11 | Dead ratio: 100.00%     | VACUUM FULL public.application_action_event; -- WARNING: Locks table
 Performance       | Table Bloat: public.application_session                                           | WARN   | WARNING        | Live tuples: 2 | Dead tuples: 11 | Dead ratio: 550.00%      | VACUUM FULL public.application_session; -- WARNING: Locks table
 Performance       | Table Bloat: public.committee_proposal_data                                       | WARN   | WARNING        | Live tuples: 4 | Dead tuples: 4 | Dead ratio: 100.00%       | VACUUM FULL public.committee_proposal_data; -- WARNING: Locks table
 Performance       | Table Bloat: public.document_element                                              | WARN   | WARNING        | Live tuples: 9 | Dead tuples: 2709 | Dead ratio: 30100.00%  | VACUUM FULL public.document_element; -- WARNING: Locks table
 Performance       | Table Bloat: public.qrtz_scheduler_state                                          | WARN   | WARNING        | Live tuples: 1 | Dead tuples: 9034 | Dead ratio: 903400.00% | VACUUM FULL public.qrtz_scheduler_state; -- WARNING: Locks table
 Performance       | Table Maintenance: public.jv_commit                                               | WARN   | WARNING        | Last vacuum: NEVER | Size: 689 MB                           | VACUUM ANALYZE public.jv_commit;
 Performance       | Table Maintenance: public.jv_commit_property                                      | WARN   | WARNING        | Last vacuum: NEVER | Size: 482 MB                           | VACUUM ANALYZE public.jv_commit_property;
 Performance       | Table Maintenance: public.jv_snapshot                                             | WARN   | WARNING        | Last vacuum: NEVER | Size: 12 GB                            | VACUUM ANALYZE public.jv_snapshot;
 Performance       | Table Maintenance: public.view_riksdagen_document_type_daily_summary              | WARN   | WARNING        | Last vacuum: NEVER | Size: 1800 kB                          | VACUUM ANALYZE public.view_riksdagen_document_type_daily_summary;
 Performance       | Table Maintenance: public.view_riksdagen_org_document_daily_summary               | WARN   | WARNING        | Last vacuum: NEVER | Size: 4136 kB                          | VACUUM ANALYZE public.view_riksdagen_org_document_daily_summary;
 Performance       | Table Maintenance: public.view_riksdagen_party_document_daily_summary             | WARN   | WARNING        | Last vacuum: NEVER | Size: 600 kB                           | VACUUM ANALYZE public.view_riksdagen_party_document_daily_summary;
 Performance       | Table Maintenance: public.view_riksdagen_politician_document                      | WARN   | WARNING        | Last vacuum: NEVER | Size: 61 MB                            | VACUUM ANALYZE public.view_riksdagen_politician_document;
 Performance       | Table Maintenance: public.view_riksdagen_politician_document_daily_summary        | WARN   | WARNING        | Last vacuum: NEVER | Size: 3624 kB                          | VACUUM ANALYZE public.view_riksdagen_politician_document_daily_summary;
 Performance       | Table Maintenance: public.view_riksdagen_politician_document_summary              | WARN   | WARNING        | Last vacuum: NEVER | Size: 416 kB                           | VACUUM ANALYZE public.view_riksdagen_politician_document_summary;
 Performance       | Table Maintenance: public.view_worldbank_indicator_data_country_summary           | WARN   | WARNING        | Last vacuum: NEVER | Size: 3736 kB                          | VACUUM ANALYZE public.view_worldbank_indicator_data_country_summary;
 Schema Integrity  | Materialized View Freshness: view_riksdagen_vote_data_ballot_party_summary_annual | WARN   | WARNING        | Never refreshed                                             | Refresh materialized view: psql -d cia_dev -f refresh-all-views.sql
 Schema Integrity  | Materialized View Freshness: view_riksdagen_vote_data_ballot_summary_annual       | WARN   | WARNING        | Never refreshed                                             | Refresh materialized view: psql -d cia_dev -f refresh-all-views.sql
 Schema Integrity  | Materialized View Freshness: view_riksdagen_vote_data_ballot_summary_monthly      | WARN   | WARNING        | Never refreshed                                             | Refresh materialized view: psql -d cia_dev -f refresh-all-views.sql
 Schema Integrity  | Materialized View Freshness: view_riksdagen_vote_data_ballot_summary_weekly       | WARN   | WARNING        | Never refreshed                                             | Refresh materialized view: psql -d cia_dev -f refresh-all-views.sql
 Security          | User Permissions: eris                                                            | WARN   | WARNING        | User: eris | Superuser: true | Create DB: false             | Review superuser privileges for eris
 View Dependencies | Empty View: view_ministry_effectiveness_trends                                    | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
 View Dependencies | Empty View: view_ministry_productivity_matrix                                     | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
 View Dependencies | Empty View: view_ministry_risk_evolution                                          | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
 View Dependencies | Empty View: view_politician_risk_summary                                          | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
 View Dependencies | Empty View: view_riksdagen_coalition_alignment_matrix                             | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
 View Dependencies | Empty View: view_riksdagen_crisis_resilience_indicators                           | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
 View Dependencies | Empty View: view_riksdagen_politician_influence_metrics                           | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
 View Dependencies | Empty View: view_riksdagen_voting_anomaly_detection                               | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
 View Dependencies | Empty View: view_risk_score_evolution                                             | WARN   | WARNING        | View returns 0 rows                                         | Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps
(117 rows)

Time: 0.388 ms

--- INFORMATIONAL ---
       category        |                      check_name                      |                                               details                                                |                                  recommendation                                  
-----------------------+------------------------------------------------------+------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------
 Data Quality          | Critical Table: ballot_data                          | Table does not exist or cannot be accessed: relation "ballot_data" does not exist                    | Verify table name and permissions
 Data Quality          | Critical Table: document_person_reference_data       | Table does not exist or cannot be accessed: relation "document_person_reference_data" does not exist | Verify table name and permissions
 Referential Integrity | Cascade Rule: qrtz_cron_triggers -> qrtz_triggers    | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_cron_triggers
 Referential Integrity | Cascade Rule: qrtz_cron_triggers -> qrtz_triggers    | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_cron_triggers
 Referential Integrity | Cascade Rule: qrtz_cron_triggers -> qrtz_triggers    | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_cron_triggers
 Referential Integrity | Cascade Rule: qrtz_simple_triggers -> qrtz_triggers  | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_simple_triggers
 Referential Integrity | Cascade Rule: qrtz_simple_triggers -> qrtz_triggers  | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_simple_triggers
 Referential Integrity | Cascade Rule: qrtz_simple_triggers -> qrtz_triggers  | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_simple_triggers
 Referential Integrity | Cascade Rule: qrtz_simprop_triggers -> qrtz_triggers | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_simprop_triggers
 Referential Integrity | Cascade Rule: qrtz_simprop_triggers -> qrtz_triggers | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_simprop_triggers
 Referential Integrity | Cascade Rule: qrtz_simprop_triggers -> qrtz_triggers | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_simprop_triggers
 Referential Integrity | Cascade Rule: qrtz_triggers -> qrtz_job_details      | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_triggers
 Referential Integrity | Cascade Rule: qrtz_triggers -> qrtz_job_details      | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_triggers
 Referential Integrity | Cascade Rule: qrtz_triggers -> qrtz_job_details      | Delete rule: CASCADE | Update rule: NO ACTION                                                        | CASCADE delete configured - ensure this is intentional for qrtz_triggers
 Security              | User Permissions: postgres                           | User: postgres | Superuser: true | Create DB: true                                                   | 
(15 rows)

Time: 0.154 ms

--- JSON EXPORT ---
Generating JSON health check report...
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   json_report                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {"timestamp" : "2025-11-27T16:24:49.901939+00:00", "database" : "cia_dev", "health_score" : 78.55, "summary" : {"total_checks" : 303, "passed" : 186, "warnings" : 104, "failures" : 13, "critical_issues" : 13}, "categories" : [{"category" : "Schema Integrity", "total_checks" : 178, "passed" : 162, "warnings" : 4, "failures" : 12, "pass_rate" : 91.0, "category_score" : 92.13}, {"category" : "Security", "total_checks" : 4, "passed" : 3, "warnings" : 1, "failures" : 0, "pass_rate" : 75.0, "category_score" : 87.50}, {"category" : "View Dependencies", "total_checks" : 10, "passed" : 1, "warnings" : 9, "failures" : 0, "pass_rate" : 10.0, "category_score" : 55.00}, {"category" : "Performance", "total_checks" : 97, "passed" : 7, "warnings" : 89, "failures" : 1, "pass_rate" : 7.2, "category_score" : 53.09}, {"category" : "Data Quality", "total_checks" : 14, "passed" : 13, "warnings" : 1, "failures" : 0, "pass_rate" : 92.9, "category_score" : 96.43}], "issues" : [{"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_cron_triggers.sched_name", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_triggers"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_triggers.job_group", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_job_details"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_cron_triggers.trigger_name", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_triggers"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_triggers.job_group", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_job_details"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_triggers.job_name", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_job_details"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_triggers.job_name", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_job_details"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_triggers.sched_name", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_job_details"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_triggers.sched_name", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_job_details"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_cron_triggers.sched_name", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_triggers"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_cron_triggers.trigger_group", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_triggers"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_cron_triggers.trigger_group", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_triggers"}, {"category" : "Schema Integrity", "check_name" : "Foreign Key: qrtz_cron_triggers.trigger_name", "status" : "FAIL", "severity" : 4, "details" : "Found 4 orphaned records", "recommendation" : "Clean up orphaned records or add missing parent records in qrtz_triggers"}, {"category" : "Performance", "check_name" : "Query Cache Hit Ratio", "status" : "FAIL", "severity" : 3, "details" : "Hit Ratio: 65.90%", "recommendation" : "Increase shared_buffers or optimize queries to reduce disk I/O"}, {"category" : "Performance", "check_name" : "Missing Index: assignment_data.assignment_list_person_assig_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_assignment_data_assignment_list_person_assig_0 ON assignment_data(assignment_list_person_assig_0);"}, {"category" : "Performance", "check_name" : "Missing Index: assignment_element.uppdrag_person_assignment_el_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_assignment_element_uppdrag_person_assignment_el_0 ON assignment_element(uppdrag_person_assignment_el_0);"}, {"category" : "Performance", "check_name" : "Missing Index: committee_proposal_component_0.against_proposal_container_c_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_committee_proposal_component_0_against_proposal_container_c_0 ON committee_proposal_component_0(against_proposal_container_c_0);"}, {"category" : "Performance", "check_name" : "Missing Index: committee_proposal_component_0.committee_proposal_container_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_committee_proposal_component_0_committee_proposal_container_0 ON committee_proposal_component_0(committee_proposal_container_0);"}, {"category" : "Performance", "check_name" : "Missing Index: committee_proposal_component_0.document_committee_proposal__0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_committee_proposal_component_0_document_committee_proposal__0 ON committee_proposal_component_0(document_committee_proposal__0);"}, {"category" : "Performance", "check_name" : "Missing Index: committee_proposal_data.committee_proposal_list_comm_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_committee_proposal_data_committee_proposal_list_comm_0 ON committee_proposal_data(committee_proposal_list_comm_0);"}, {"category" : "Performance", "check_name" : "Missing Index: country_element.country_countries_element_hj_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_country_element_country_countries_element_hj_0 ON country_element(country_countries_element_hj_0);"}, {"category" : "Performance", "check_name" : "Missing Index: detail_data.detail_list_person_detail_da_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_detail_data_detail_list_person_detail_da_0 ON detail_data(detail_list_person_detail_da_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_activity_data.document_activities_document_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_activity_data_document_activities_document_0 ON document_activity_data(document_activities_document_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_attachment.document_attachment_list_doc_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_attachment_document_attachment_list_doc_0 ON document_attachment(document_attachment_list_doc_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_detail_data.document_detail_list_documen_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_detail_data_document_detail_list_documen_0 ON document_detail_data(document_detail_list_documen_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_element.dokument_document_container__0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_element_dokument_document_container__0 ON document_element(dokument_document_container__0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_person_reference_da_0.document_person_reference_li_1", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_person_reference_da_0_document_person_reference_li_1 ON document_person_reference_da_0(document_person_reference_li_1);"}, {"category" : "Performance", "check_name" : "Missing Index: document_proposal_container.proposal_document_proposal_c_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_proposal_container_proposal_document_proposal_c_0 ON document_proposal_container(proposal_document_proposal_c_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_reference_data.document_reference_list_docu_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_reference_data_document_reference_list_docu_0 ON document_reference_data(document_reference_list_docu_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_status_container.document_activity_container__0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_status_container_document_activity_container__0 ON document_status_container(document_activity_container__0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_status_container.document_attachment_containe_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_status_container_document_attachment_containe_0 ON document_status_container(document_attachment_containe_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_status_container.document_detail_container_do_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_status_container_document_detail_container_do_0 ON document_status_container(document_detail_container_do_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_status_container.document_document_status_con_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_status_container_document_document_status_con_0 ON document_status_container(document_document_status_con_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_status_container.document_person_reference_co_1", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_status_container_document_person_reference_co_1 ON document_status_container(document_person_reference_co_1);"}, {"category" : "Performance", "check_name" : "Missing Index: document_status_container.document_proposal_document_s_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_status_container_document_proposal_document_s_0 ON document_status_container(document_proposal_document_s_0);"}, {"category" : "Performance", "check_name" : "Missing Index: document_status_container.document_reference_container_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_document_status_container_document_reference_container_0 ON document_status_container(document_reference_container_0);"}, {"category" : "Performance", "check_name" : "Missing Index: domain_portal.hjid", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_domain_portal_hjid ON domain_portal(hjid);"}, {"category" : "Performance", "check_name" : "Missing Index: indicator_element.indicator__indicators_elemen_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_indicator_element_indicator__indicators_elemen_0 ON indicator_element(indicator__indicators_elemen_0);"}, {"category" : "Performance", "check_name" : "Missing Index: indicator_element.topics_indicator_element_hjid", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_indicator_element_topics_indicator_element_hjid ON indicator_element(topics_indicator_element_hjid);"}, {"category" : "Performance", "check_name" : "Missing Index: person_container_data.person_person_container_data_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_person_container_data_person_person_container_data_0 ON person_container_data(person_person_container_data_0);"}, {"category" : "Performance", "check_name" : "Missing Index: person_data.person_assignment_data_perso_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_person_data_person_assignment_data_perso_0 ON person_data(person_assignment_data_perso_0);"}, {"category" : "Performance", "check_name" : "Missing Index: person_data.person_detail_data_person_da_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_person_data_person_detail_data_person_da_0 ON person_data(person_detail_data_person_da_0);"}, {"category" : "Performance", "check_name" : "Missing Index: person_detail_element.detail_list_person_detail_el_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_person_detail_element_detail_list_person_detail_el_0 ON person_detail_element(detail_list_person_detail_el_0);"}, {"category" : "Performance", "check_name" : "Missing Index: person_element.person_assignment_element_pe_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_person_element_person_assignment_element_pe_0 ON person_element(person_assignment_element_pe_0);"}, {"category" : "Performance", "check_name" : "Missing Index: person_element.person_detail_element_person_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_person_element_person_detail_element_person_0 ON person_element(person_detail_element_person_0);"}, {"category" : "Performance", "check_name" : "Missing Index: person_element.person_person_container_elem_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_person_element_person_person_container_elem_0 ON person_element(person_person_container_elem_0);"}, {"category" : "Performance", "check_name" : "Missing Index: portal.portals_agency_hjid", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_portal_portals_agency_hjid ON portal(portals_agency_hjid);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_cron_triggers.sched_name", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_cron_triggers_sched_name ON qrtz_cron_triggers(sched_name);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_cron_triggers.trigger_group", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_cron_triggers_trigger_group ON qrtz_cron_triggers(trigger_group);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_cron_triggers.trigger_name", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_cron_triggers_trigger_name ON qrtz_cron_triggers(trigger_name);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_simple_triggers.sched_name", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_simple_triggers_sched_name ON qrtz_simple_triggers(sched_name);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_simple_triggers.trigger_group", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_simple_triggers_trigger_group ON qrtz_simple_triggers(trigger_group);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_simple_triggers.trigger_name", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_simple_triggers_trigger_name ON qrtz_simple_triggers(trigger_name);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_simprop_triggers.sched_name", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_simprop_triggers_sched_name ON qrtz_simprop_triggers(sched_name);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_simprop_triggers.trigger_group", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_simprop_triggers_trigger_group ON qrtz_simprop_triggers(trigger_group);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_simprop_triggers.trigger_name", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_simprop_triggers_trigger_name ON qrtz_simprop_triggers(trigger_name);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_triggers.job_group", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_triggers_job_group ON qrtz_triggers(job_group);"}, {"category" : "Performance", "check_name" : "Missing Index: qrtz_triggers.job_name", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_qrtz_triggers_job_name ON qrtz_triggers(job_name);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_county_data.county_regions_sweden_county_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_county_data_county_regions_sweden_county_0 ON sweden_county_data(county_regions_sweden_county_0);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_county_electoral_area.landstingsvalkrets_sweden_co_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_county_electoral_area_landstingsvalkrets_sweden_co_0 ON sweden_county_electoral_area(landstingsvalkrets_sweden_co_0);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_county_electoral_regi_1.county_electoral_regions_swe_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_county_electoral_regi_1_county_electoral_regions_swe_0 ON sweden_county_electoral_regi_1(county_electoral_regions_swe_0);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_election_type.election_types_sweden_electi_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_election_type_election_types_sweden_electi_0 ON sweden_election_type(election_types_sweden_electi_0);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_election_type.region_sweden_election_type__0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_election_type_region_sweden_election_type__0 ON sweden_election_type(region_sweden_election_type__0);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_municipality_data.kommun_sweden_county_data_hj_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_municipality_data_kommun_sweden_county_data_hj_0 ON sweden_municipality_data(kommun_sweden_county_data_hj_0);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_municipality_election_0.kommunvalkrets_sweden_munici_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_municipality_election_0_kommunvalkrets_sweden_munici_0 ON sweden_municipality_election_0(kommunvalkrets_sweden_munici_0);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_parliament_electoral__1.parliament_electoral_regions_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_parliament_electoral__1_parliament_electoral_regions_0 ON sweden_parliament_electoral__1(parliament_electoral_regions_0);"}, {"category" : "Performance", "check_name" : "Missing Index: sweden_political_party.parties_sweden_election_regi_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_sweden_political_party_parties_sweden_election_regi_0 ON sweden_political_party(parties_sweden_election_regi_0);"}, {"category" : "Performance", "check_name" : "Missing Index: topic.topic_topics_hjid", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_topic_topic_topics_hjid ON topic(topic_topics_hjid);"}, {"category" : "Performance", "check_name" : "Missing Index: user_account_address.hjid", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_user_account_address_hjid ON user_account_address(hjid);"}, {"category" : "Performance", "check_name" : "Missing Index: world_bank_data.data__data_element_hjid", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_world_bank_data_data__data_element_hjid ON world_bank_data(data__data_element_hjid);"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.jv_commit_property", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 482 MB", "recommendation" : "VACUUM ANALYZE public.jv_commit_property;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.jv_snapshot", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 12 GB", "recommendation" : "VACUUM ANALYZE public.jv_snapshot;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.view_worldbank_indicator_data_country_summary", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 3736 kB", "recommendation" : "VACUUM ANALYZE public.view_worldbank_indicator_data_country_summary;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.view_riksdagen_politician_document", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 61 MB", "recommendation" : "VACUUM ANALYZE public.view_riksdagen_politician_document;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.view_riksdagen_document_type_daily_summary", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 1800 kB", "recommendation" : "VACUUM ANALYZE public.view_riksdagen_document_type_daily_summary;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.view_riksdagen_politician_document_daily_summary", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 3624 kB", "recommendation" : "VACUUM ANALYZE public.view_riksdagen_politician_document_daily_summary;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.view_riksdagen_party_document_daily_summary", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 600 kB", "recommendation" : "VACUUM ANALYZE public.view_riksdagen_party_document_daily_summary;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.view_riksdagen_org_document_daily_summary", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 4136 kB", "recommendation" : "VACUUM ANALYZE public.view_riksdagen_org_document_daily_summary;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.view_riksdagen_politician_document_summary", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 416 kB", "recommendation" : "VACUUM ANALYZE public.view_riksdagen_politician_document_summary;"}, {"category" : "Performance", "check_name" : "Table Maintenance: public.jv_commit", "status" : "WARN", "severity" : 2, "details" : "Last vacuum: NEVER | Size: 689 MB", "recommendation" : "VACUUM ANALYZE public.jv_commit;"}, {"category" : "Performance", "check_name" : "Slow Query: DO $$\nDECLARE\n    fk_record RECORD;\n    orphan_cou...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 275372.81ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: DO $$\nDECLARE\n    v_views TEXT[] := ARRAY[\n       ...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 189709.65ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: SELECT COUNT(*) FROM public.jv_snapshot child LEFT...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 142876.06ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: REFRESH MATERIALIZED VIEW view_riksdagen_vote_data...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 109393.78ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: DO $$\nDECLARE\n    -- *** MAINTENANCE NOTE ***\n    ...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 63404.74ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: SELECT COUNT(*) FROM public.jv_global_id child LEF...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 55127.44ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: SELECT COUNT(*) FROM public.jv_snapshot child LEFT...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 39229.69ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: SELECT COUNT(*) FROM public.jv_commit_property chi...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 35047.82ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: REFRESH MATERIALIZED VIEW view_riksdagen_committee...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 34097.26ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Slow Query: REFRESH MATERIALIZED VIEW view_riksdagen_vote_data...", "status" : "WARN", "severity" : 2, "details" : "Avg time: 22950.77ms | Calls: 1", "recommendation" : "Optimize query or add indexes"}, {"category" : "Performance", "check_name" : "Table Bloat: public.qrtz_scheduler_state", "status" : "WARN", "severity" : 2, "details" : "Live tuples: 1 | Dead tuples: 9034 | Dead ratio: 903400.00%", "recommendation" : "VACUUM FULL public.qrtz_scheduler_state; -- WARNING: Locks table"}, {"category" : "Performance", "check_name" : "Table Bloat: public.document_element", "status" : "WARN", "severity" : 2, "details" : "Live tuples: 9 | Dead tuples: 2709 | Dead ratio: 30100.00%", "recommendation" : "VACUUM FULL public.document_element; -- WARNING: Locks table"}, {"category" : "Performance", "check_name" : "Table Bloat: public.application_action_event", "status" : "WARN", "severity" : 2, "details" : "Live tuples: 11 | Dead tuples: 11 | Dead ratio: 100.00%", "recommendation" : "VACUUM FULL public.application_action_event; -- WARNING: Locks table"}, {"category" : "Performance", "check_name" : "Table Bloat: public.application_session", "status" : "WARN", "severity" : 2, "details" : "Live tuples: 2 | Dead tuples: 11 | Dead ratio: 550.00%", "recommendation" : "VACUUM FULL public.application_session; -- WARNING: Locks table"}, {"category" : "Performance", "check_name" : "Table Bloat: public.committee_proposal_data", "status" : "WARN", "severity" : 2, "details" : "Live tuples: 4 | Dead tuples: 4 | Dead ratio: 100.00%", "recommendation" : "VACUUM FULL public.committee_proposal_data; -- WARNING: Locks table"}, {"category" : "Performance", "check_name" : "Table Bloat: public.against_proposal_data", "status" : "WARN", "severity" : 2, "details" : "Live tuples: 1 | Dead tuples: 1 | Dead ratio: 100.00%", "recommendation" : "VACUUM FULL public.against_proposal_data; -- WARNING: Locks table"}, {"category" : "Security", "check_name" : "User Permissions: eris", "status" : "WARN", "severity" : 2, "details" : "User: eris | Superuser: true | Create DB: false", "recommendation" : "Review superuser privileges for eris"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_ministry_effectiveness_trends", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_ministry_productivity_matrix", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_ministry_risk_evolution", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_politician_risk_summary", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_riksdagen_coalition_alignment_matrix", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_riksdagen_crisis_resilience_indicators", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_riksdagen_politician_influence_metrics", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_riksdagen_voting_anomaly_detection", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "View Dependencies", "check_name" : "Empty View: view_risk_score_evolution", "status" : "WARN", "severity" : 2, "details" : "View returns 0 rows", "recommendation" : "Check if this is expected. See TROUBLESHOOTING_EMPTY_VIEWS.md for diagnostic steps"}, {"category" : "Schema Integrity", "check_name" : "Materialized View Freshness: view_riksdagen_vote_data_ballot_summary_weekly", "status" : "WARN", "severity" : 2, "details" : "Never refreshed", "recommendation" : "Refresh materialized view: psql -d cia_dev -f refresh-all-views.sql"}, {"category" : "Schema Integrity", "check_name" : "Materialized View Freshness: view_riksdagen_vote_data_ballot_summary_monthly", "status" : "WARN", "severity" : 2, "details" : "Never refreshed", "recommendation" : "Refresh materialized view: psql -d cia_dev -f refresh-all-views.sql"}, {"category" : "Schema Integrity", "check_name" : "Materialized View Freshness: view_riksdagen_vote_data_ballot_summary_annual", "status" : "WARN", "severity" : 2, "details" : "Never refreshed", "recommendation" : "Refresh materialized view: psql -d cia_dev -f refresh-all-views.sql"}, {"category" : "Schema Integrity", "check_name" : "Materialized View Freshness: view_riksdagen_vote_data_ballot_party_summary_annual", "status" : "WARN", "severity" : 2, "details" : "Never refreshed", "recommendation" : "Refresh materialized view: psql -d cia_dev -f refresh-all-views.sql"}, {"category" : "Data Quality", "check_name" : "Critical Table: sweden_political_party", "status" : "WARN", "severity" : 2, "details" : "Table has only 40 rows", "recommendation" : "Verify data completeness and import status"}, {"category" : "Performance", "check_name" : "Missing Index: against_proposal_data.against_proposal_list_agains_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_against_proposal_data_against_proposal_list_agains_0 ON against_proposal_data(against_proposal_list_agains_0);"}, {"category" : "Performance", "check_name" : "Missing Index: application_action_event.events_application_session_h_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_application_action_event_events_application_session_h_0 ON application_action_event(events_application_session_h_0);"}, {"category" : "Performance", "check_name" : "Missing Index: application_view.data_source_information_appl_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_application_view_data_source_information_appl_0 ON application_view(data_source_information_appl_0);"}, {"category" : "Performance", "check_name" : "Missing Index: application_view.operational_information_appl_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_application_view_operational_information_appl_0 ON application_view(operational_information_appl_0);"}, {"category" : "Performance", "check_name" : "Missing Index: application_view.performance_indicators_appli_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_application_view_performance_indicators_appli_0 ON application_view(performance_indicators_appli_0);"}, {"category" : "Performance", "check_name" : "Missing Index: application_view.quality_assurance_applicatio_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_application_view_quality_assurance_applicatio_0 ON application_view(quality_assurance_applicatio_0);"}, {"category" : "Performance", "check_name" : "Missing Index: application_view.target_profile_application_v_0", "status" : "WARN", "severity" : 2, "details" : "No index found on foreign key column", "recommendation" : "CREATE INDEX idx_application_view_target_profile_application_v_0 ON application_view(target_profile_application_v_0);"}]}
(1 row)

Time: 4.200 ms

--- PROMETHEUS METRICS EXPORT ---
Generating Prometheus-compatible metrics...
                              prometheus_metrics                              
------------------------------------------------------------------------------
 # HELP cia_db_health_score Database health score by category                +
 # TYPE cia_db_health_score gauge                                            +
 cia_db_health_score{category="Schema Integrity"} 92.13                      +
 cia_db_health_score{category="Security"} 87.50                              +
 cia_db_health_score{category="View Dependencies"} 55.00                     +
 cia_db_health_score{category="Performance"} 53.09                           +
 cia_db_health_score{category="Data Quality"} 96.43                          +
                                                                             +
 # HELP cia_db_health_checks_total Total health checks by category and status+
 # TYPE cia_db_health_checks_total gauge                                     +
 cia_db_health_checks_total{category="Schema Integrity",status="pass"} 162   +
 cia_db_health_checks_total{category="Schema Integrity",status="warn"} 4     +
 cia_db_health_checks_total{category="Schema Integrity",status="fail"} 12    +
 cia_db_health_checks_total{category="Security",status="pass"} 3             +
 cia_db_health_checks_total{category="Security",status="warn"} 1             +
 cia_db_health_checks_total{category="Security",status="fail"} 0             +
 cia_db_health_checks_total{category="View Dependencies",status="pass"} 1    +
 cia_db_health_checks_total{category="View Dependencies",status="warn"} 9    +
 cia_db_health_checks_total{category="View Dependencies",status="fail"} 0    +
 cia_db_health_checks_total{category="Performance",status="pass"} 7          +
 cia_db_health_checks_total{category="Performance",status="warn"} 89         +
 cia_db_health_checks_total{category="Performance",status="fail"} 1          +
 cia_db_health_checks_total{category="Data Quality",status="pass"} 13        +
 cia_db_health_checks_total{category="Data Quality",status="warn"} 1         +
 cia_db_health_checks_total{category="Data Quality",status="fail"} 0
(1 row)

Time: 1.816 ms

To export Prometheus metrics to file, run:
  psql -U postgres -d cia_dev -t -A -f schema-health-check.sql | grep -E "^(#|cia_db_)" > metrics.prom


==================================================
Health check completed
Finished: Thu Nov 27 05:24:49 PM CET 2025
==================================================

To save JSON output to file, run:
  psql -U postgres -d cia_dev -t -A -c "SELECT json_build_object(...)" > health_check.json

For automation, see README-SCHEMA-MAINTENANCE.md

Timing is off.
